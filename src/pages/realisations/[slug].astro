---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import { realisations } from "../../data/realisations";
import { site } from "../../lib/site";

export async function getStaticPaths() {
  return realisations.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "CreativeWork",
    name: project.title,
    description: project.goal,
    url: `${site.url}/realisations/${project.slug}/`,
  },
];
---
<BaseLayout
  title={`${project.title} | Réalisations Clic COM`}
  description={project.goal}
  canonical={`${site.url}/realisations/${project.slug}/`}
  breadcrumbs={[
    { name: "Accueil", item: "/" },
    { name: "Réalisations", item: "/realisations/" },
    { name: project.title, item: `/realisations/${project.slug}/` },
  ]}
  jsonLd={jsonLd}
>
  <Navbar current="/realisations/" />
  <main class="mx-auto max-w-5xl px-6 py-16">
    <p class="text-xs font-semibold uppercase text-accent">Projet exemple</p>
    <h1 class="mt-2 text-4xl font-semibold text-ink">{project.title}</h1>
    <p class="mt-4 text-lg text-black/70">{project.goal}</p>

    <div class="mt-10 grid gap-6 lg:grid-cols-3">
      <section class="rounded-3xl border border-black/10 bg-white p-6 shadow-soft">
        <h2 class="text-lg font-semibold text-ink">Objectif</h2>
        <p class="mt-3 text-sm text-black/70">{project.goal}</p>
      </section>
      <section class="rounded-3xl border border-black/10 bg-white p-6 shadow-soft">
        <h2 class="text-lg font-semibold text-ink">Solution</h2>
        <p class="mt-3 text-sm text-black/70">{project.solution}</p>
      </section>
      <section class="rounded-3xl border border-black/10 bg-white p-6 shadow-soft">
        <h2 class="text-lg font-semibold text-ink">Stack</h2>
        <ul class="mt-3 space-y-1 text-sm text-black/70">
          {project.stack.map((item) => (
            <li>• {item}</li>
          ))}
        </ul>
      </section>
    </div>

    <section class="mt-10 rounded-3xl border border-black/10 bg-black/5 p-6">
      <h2 class="text-lg font-semibold text-ink">Résultats qualitatifs</h2>
      <ul class="mt-4 space-y-2 text-sm text-black/70">
        {project.results.map((result) => (
          <li>• {result}</li>
        ))}
      </ul>
    </section>

    <a class="mt-10 inline-flex text-sm font-semibold text-accent" href="/contact/">
      Discuter d'un projet similaire →
    </a>
  </main>
  <Footer />
</BaseLayout>
