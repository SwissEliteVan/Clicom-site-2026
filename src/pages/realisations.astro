---
import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import CTAButton from "../components/CTAButton.astro";
import { realisations } from "../data/realisations";

// Grouper les r√©alisations par secteur
const sectors = [
  { id: "all", name: "Tous les projets", icon: "üéØ" },
  { id: "restauration", name: "Restauration & H√¥tellerie", icon: "üçΩÔ∏è" },
  { id: "b2b", name: "B2B & Services", icon: "üíº" },
  { id: "artisanat", name: "Artisanat & Commerce", icon: "üõ†Ô∏è" },
  { id: "sante", name: "Sant√© & Bien-√™tre", icon: "üè•" },
  { id: "immobilier", name: "Immobilier", icon: "üè¢" },
  { id: "sport", name: "Sport & Loisirs", icon: "‚öΩ" },
];

const projectsBySector = {
  "restauration": ["bistro-lac"],
  "b2b": ["nexora-swiss"],
  "artisanat": ["atelier-marion"],
  "immobilier": ["mont-blanc-immobilier"],
  "sante": ["clinique-aurora"],
  "sport": ["equinox-sport"],
};

const detailedTestimonials = [
  {
    project: "Bistro du Lac",
    sector: "Restauration",
    name: "Sophie Martin",
    role: "G√©rante",
    photo: "üë§",
    quote: "Notre site √©tait vieillissant et ne refl√©tait pas la qualit√© de nos prestations. Clic COM a su moderniser notre image tout en gardant l'authenticit√© de notre √©tablissement. Les r√©servations en ligne ont tripl√© en 3 mois.",
    results: [
      "+200% de demandes de r√©servation",
      "Temps de chargement divis√© par 5",
      "Premi√®re page Google pour 'restaurant lac L√©man'",
    ],
    duration: "6 semaines",
  },
  {
    project: "Nexora Swiss",
    sector: "B2B",
    name: "Marc Dubois",
    role: "Directeur Commercial",
    photo: "üë§",
    quote: "Nous avions besoin d'une landing page qui convertit vraiment. L'√©quipe a su clarifier notre proposition de valeur et structurer notre message. Les r√©sultats ont d√©pass√© nos attentes.",
    results: [
      "Taux de conversion pass√© de 2% √† 7%",
      "+150% de demandes de d√©mo qualifi√©es",
      "Co√ªt par lead r√©duit de 40%",
    ],
    duration: "3 semaines",
  },
  {
    project: "Atelier Marion",
    sector: "Artisanat",
    name: "Caroline Renaud",
    role: "Artisane",
    photo: "üë§",
    quote: "En tant qu'artisane, je n'avais ni le temps ni les comp√©tences pour m'occuper de ma visibilit√© en ligne. L'accompagnement SEO local m'a permis d'√™tre enfin visible et de toucher ma client√®le de proximit√©.",
    results: [
      "Premi√®re place Google Maps dans ma zone",
      "+180% de visites sur le site",
      "15-20 demandes qualifi√©es par mois",
    ],
    duration: "8 semaines",
  },
];
---
<BaseLayout
  title="Nos R√©alisations | Clic COM"
  description="Portfolio Clic COM : projets web et marketing orient√©s conversion par secteur d'activit√©."
  breadcrumbs={[{ name: "Accueil", item: "/" }, { name: "R√©alisations", item: "/realisations/" }]}
>
  <Navbar current="/realisations/" />
  <main class="mx-auto max-w-6xl px-6 py-16">
    <div class="space-y-4">
      <h1 class="text-4xl font-semibold text-ink">Nos R√©alisations</h1>
      <p class="text-lg text-black/70">
        D√©couvrez nos projets par secteur d'activit√©. Chaque r√©alisation pr√©sente l'objectif, la
        solution mise en place et les r√©sultats concrets obtenus.
      </p>
    </div>

    <!-- Navigation par secteur -->
    <nav class="mt-10 flex flex-wrap gap-3" aria-label="Filtrer par secteur">
      {sectors.map((sector) => (
        <button
          type="button"
          data-sector={sector.id}
          class="sector-filter rounded-full border border-black/10 bg-white px-4 py-2 text-sm font-semibold text-ink hover:bg-accent hover:text-white hover:border-accent transition"
        >
          {sector.icon} {sector.name}
        </button>
      ))}
    </nav>

    <!-- Galerie de projets -->
    <div class="mt-10">
      <h2 class="text-2xl font-semibold text-ink mb-6">Galerie de projets</h2>
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {realisations.map((project) => (
          <article
            class="project-card rounded-3xl border border-black/10 bg-white p-6 shadow-soft hover:shadow-lg transition-shadow"
            data-sector={Object.keys(projectsBySector).find(sector =>
              projectsBySector[sector].includes(project.slug)
            )}
          >
            <div class="aspect-video rounded-2xl bg-gradient-to-br from-accent/10 to-accent/5 flex items-center justify-center mb-4">
              <span class="text-4xl">üíº</span>
            </div>
            <p class="text-xs font-semibold uppercase text-accent">{project.label}</p>
            <h3 class="mt-2 text-lg font-semibold text-ink">{project.title}</h3>
            <p class="mt-3 text-sm text-black/70">{project.goal}</p>
            <div class="mt-4 flex flex-wrap gap-2">
              {project.stack.map((tech) => (
                <span class="rounded-full bg-black/5 px-3 py-1 text-xs text-black/60">
                  {tech}
                </span>
              ))}
            </div>
            <a
              class="mt-4 inline-flex text-sm font-semibold text-accent hover:underline"
              href={`/realisations/${project.slug}/`}
            >
              Voir l'√©tude de cas d√©taill√©e ‚Üí
            </a>
          </article>
        ))}
      </div>
    </div>

    <!-- √âtudes de cas d√©taill√©es avec t√©moignages -->
    <div class="mt-20">
      <h2 class="text-2xl font-semibold text-ink mb-6">T√©moignages clients d√©taill√©s</h2>
      <div class="space-y-8">
        {detailedTestimonials.map((testimonial) => (
          <article class="rounded-3xl border border-black/10 bg-gradient-to-br from-white to-black/5 p-8 shadow-soft">
            <div class="grid gap-8 lg:grid-cols-[2fr,1fr]">
              <div>
                <div class="flex items-start gap-4 mb-4">
                  <span class="text-4xl">{testimonial.photo}</span>
                  <div>
                    <p class="font-semibold text-ink">{testimonial.name}</p>
                    <p class="text-sm text-black/60">{testimonial.role}</p>
                    <p class="text-xs font-semibold uppercase text-accent mt-1">
                      {testimonial.project} ¬∑ {testimonial.sector}
                    </p>
                  </div>
                </div>
                <blockquote class="text-black/70 italic border-l-4 border-accent pl-4 my-6">
                  "{testimonial.quote}"
                </blockquote>
                <div class="mt-4">
                  <p class="text-sm font-semibold text-ink mb-2">Dur√©e du projet : {testimonial.duration}</p>
                </div>
              </div>
              <div class="rounded-2xl border border-black/10 bg-white p-6">
                <p class="text-sm font-semibold text-ink mb-4">R√©sultats mesurables :</p>
                <ul class="space-y-3">
                  {testimonial.results.map((result) => (
                    <li class="flex items-start gap-2 text-sm text-black/70">
                      <span class="text-accent font-bold">‚úì</span>
                      <span>{result}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>

    <!-- CTA final -->
    <div class="mt-16 flex flex-wrap items-center justify-between gap-6 rounded-3xl border border-black/10 bg-accent/5 p-8">
      <div class="flex-1">
        <h2 class="text-2xl font-semibold text-ink">Votre projet m√©rite les m√™mes r√©sultats</h2>
        <p class="mt-2 text-black/70">
          Parlons de vos objectifs et cr√©ons ensemble une strat√©gie sur mesure pour votre activit√©.
        </p>
      </div>
      <CTAButton href="/contact/" label="D√©marrer un projet">
        D√©marrer un projet
      </CTAButton>
    </div>

    <!-- M√©thodologie -->
    <div class="mt-16 rounded-3xl border border-black/10 bg-white p-8">
      <h2 class="text-xl font-semibold text-ink mb-6">Notre approche projet</h2>
      <div class="grid gap-6 md:grid-cols-3">
        <div class="space-y-3">
          <div class="text-3xl">üéØ</div>
          <h3 class="font-semibold text-ink">Compr√©hension approfondie</h3>
          <p class="text-sm text-black/70">
            Nous prenons le temps de comprendre votre activit√©, vos clients et vos objectifs sp√©cifiques.
          </p>
        </div>
        <div class="space-y-3">
          <div class="text-3xl">üõ†Ô∏è</div>
          <h3 class="font-semibold text-ink">Solution sur mesure</h3>
          <p class="text-sm text-black/70">
            Chaque projet b√©n√©ficie d'une strat√©gie personnalis√©e adapt√©e √† vos besoins et votre budget.
          </p>
        </div>
        <div class="space-y-3">
          <div class="text-3xl">üìä</div>
          <h3 class="font-semibold text-ink">R√©sultats mesurables</h3>
          <p class="text-sm text-black/70">
            Nous fixons des KPIs clairs d√®s le d√©part et suivons l'√©volution pour optimiser en continu.
          </p>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Filtrage simple par secteur (c√¥t√© client)
    document.addEventListener('DOMContentLoaded', () => {
      const filters = document.querySelectorAll('.sector-filter');
      const projects = document.querySelectorAll('.project-card');

      filters.forEach(filter => {
        filter.addEventListener('click', () => {
          const sector = filter.getAttribute('data-sector');

          // Mise √† jour visuelle du filtre actif
          filters.forEach(f => f.classList.remove('bg-accent', 'text-white'));
          filter.classList.add('bg-accent', 'text-white');

          // Filtrage des projets
          projects.forEach(project => {
            const projectSector = project.getAttribute('data-sector');
            if (sector === 'all' || projectSector === sector) {
              project.style.display = 'block';
            } else {
              project.style.display = 'none';
            }
          });
        });
      });
    });
  </script>

  <Footer />
</BaseLayout>
