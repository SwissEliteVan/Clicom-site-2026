---
/**
 * Homepage - Tech Abstract Premium
 * Main landing page with Swiss precision design
 */

import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import CTAButton from "../components/CTAButton.astro";
import FaqAccordion from "../components/FaqAccordion.astro";
import TechCard from "../components/TechCard.astro";
import TechBackground from "../components/TechBackground.astro";
import { realisations } from "../data/realisations";
import { site } from "../lib/site";
import { getCollection } from "astro:content";

const blogPosts = await getCollection("blog");
const latestPosts = blogPosts.sort(
  (a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
).slice(0, 3);

const services = [
  {
    title: "Site vitrine ultra-performant",
    description: "SEO propre, vitesse maximale, structure prête à convertir.",
  },
  {
    title: "Landing pages conversion",
    description: "Pages focalisées sur l'action avec message clair et CTA visibles.",
  },
  {
    title: "SEO local",
    description: "Optimisation Google Business Profile et contenus locaux ciblés.",
  },
  {
    title: "Publicité Meta/Google",
    description: "Cadrage, tracking light et optimisation continue des campagnes.",
  },
  {
    title: "Automatisation & CRM Lite",
    description: "Moins de saisie, plus de suivi utile grâce à des flux simples.",
  },
  {
    title: "Contenu & branding",
    description: "Copywriting orienté conversion et identité cohérente.",
  },
];

const faqItems = [
  {
    question: "Travaillez-vous uniquement en Suisse ?",
    answer:
      "Nous sommes basés en Suisse et priorisons les entreprises locales, mais nous pouvons accompagner des projets francophones selon le besoin.",
  },
  {
    question: "Peut-on garder notre site actuel ?",
    answer:
      "Oui, nous pouvons optimiser l'existant si la base est saine. Sinon, nous proposons une refonte progressive.",
  },
  {
    question: "Quel est le délai moyen ?",
    answer:
      "Cela dépend du périmètre. Un site vitrine clair peut sortir rapidement après validation des contenus.",
  },
];

const testimonials = [
  {
    name: "Sophie Martin",
    company: "Bistro du Lac",
    role: "Gérante",
    content: "Clic COM a transformé notre présence en ligne. Nous recevons désormais des demandes de réservation qualifiées chaque semaine. Le site est rapide et notre message est enfin clair.",
    rating: 5,
  },
  {
    name: "Marc Dubois",
    company: "Nexora Swiss",
    role: "Directeur Commercial",
    content: "Une approche directe et efficace. Notre landing page convertit maintenant 3 fois mieux qu'avant. L'équipe a su clarifier notre proposition de valeur sans fioritures.",
    rating: 5,
  },
  {
    name: "Caroline Renaud",
    company: "Atelier Marion",
    role: "Artisane",
    content: "Grâce à l'optimisation SEO local, je suis maintenant visible sur Google Maps et j'ai triplé mes demandes. Un investissement qui se rentabilise rapidement.",
    rating: 5,
  },
];
---

<BaseLayout
  title="Clic COM — Le marketing qui fait vendre"
  description="Agence marketing & web en Suisse. Sites rapides, SEO local et campagnes performantes."
>
  <Navbar current="/" />

  <main>
    <!-- Hero Section -->
    <TechBackground variant="radial">
      <section class="section-spacing tech-border-b">
        <div class="container-tech">
          <div class="grid gap-12 lg:grid-cols-[1.2fr,0.8fr] lg:gap-16">
            <!-- Hero Content -->
            <div class="space-y-8">
              <div class="inline-flex items-center gap-2 rounded-full border border-[var(--accent-border)] bg-[var(--accent-soft)] px-4 py-2">
                <div class="h-1.5 w-1.5 rounded-full bg-[var(--accent-primary)] animate-pulse"></div>
                <span class="text-sm font-semibold uppercase tracking-wide text-[var(--accent-primary)]">Agence marketing & web</span>
              </div>

              <h1 class="text-balance">
                Le marketing qui fait vendre (pas juste briller).
              </h1>

              <p class="text-lg text-[var(--text-secondary)] max-w-2xl">
                Acquisition clients, sites performants et automatisations simples pour
                convertir plus vite, sans complexité inutile.
              </p>

              <div class="flex flex-wrap gap-4">
                <CTAButton href="/contact/" label="Demander un devis">
                  Demander un devis
                </CTAButton>
                <CTAButton
                  href="/realisations/"
                  variant="secondary"
                  label="Voir les réalisations"
                >
                  Voir les réalisations
                </CTAButton>
              </div>

              <div class="inline-flex items-center gap-3 rounded-[var(--radius-lg)] tech-border bg-[var(--bg-elevated)] p-4 shadow-[var(--shadow-sm)]">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />
                </svg>
                <div class="text-sm">
                  <span class="font-semibold text-[var(--text-primary)]">Coordonnées rapides :</span>
                  <span class="text-[var(--text-secondary)]"> {site.email} · {site.phone}</span>
                </div>
              </div>
            </div>

            <!-- Hero Card -->
            <TechCard variant="elevated" padding="lg" class="tech-gradient-bg">
              <h2 class="text-lg font-semibold text-[var(--text-primary)] mb-4">Ce que vous obtenez</h2>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Plan d'action clair et priorisé.</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Pages rapides, SEO technique propre.</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Contenus qui parlent à vos clients.</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Suivi simple et automatisations utiles.</span>
                </li>
              </ul>
              <div class="mt-6 rounded-[var(--radius-md)] bg-[var(--bg-elevated)] tech-border p-4">
                <p class="text-xs text-[var(--text-tertiary)] font-mono">
                  Base technique : Astro + Tailwind, hébergement statique rapide.
                </p>
              </div>
            </TechCard>
          </div>
        </div>
      </section>
    </TechBackground>

    <!-- Services Section -->
    <section class="section-spacing">
      <div class="container-tech">
        <div class="mb-12 space-y-4">
          <h2>Services orientés résultats</h2>
          <p class="text-lg text-[var(--text-secondary)] max-w-3xl">
            Chaque mission vise la conversion, la clarté et la performance mesurable.
          </p>
        </div>

        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {services.map((service) => (
            <TechCard hover>
              <h3 class="text-lg font-semibold text-[var(--text-primary)]">{service.title}</h3>
              <p class="mt-3 text-sm text-[var(--text-secondary)]">{service.description}</p>
            </TechCard>
          ))}
        </div>

        <div class="mt-10">
          <CTAButton href="/services/" label="Voir tous les services">
            Voir tous les services
          </CTAButton>
        </div>
      </div>
    </section>

    <!-- Method Section -->
    <TechBackground variant="grid">
      <section class="section-spacing bg-[var(--bg-secondary)]">
        <div class="container-tech">
          <div class="grid gap-12 lg:grid-cols-2 lg:gap-16">
            <div>
              <h2>Méthode claire et sans perte de temps</h2>
              <p class="mt-4 text-[var(--text-secondary)]">
                Nous cadrons vos priorités, structurons votre message, puis optimisons la
                diffusion. Chaque étape reste simple, actionnable et alignée sur vos objectifs.
              </p>
              <ol class="mt-8 space-y-4">
                {[
                  "Audit rapide & cadrage des objectifs.",
                  "Proposition claire, plan de production et validation.",
                  "Exécution rapide avec suivi hebdo.",
                  "Ajustements et optimisation continue."
                ].map((step, index) => (
                  <li class="flex items-start gap-4">
                    <span class="flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-[var(--radius-md)] bg-[var(--accent-primary)] text-sm font-bold text-white">
                      {index + 1}
                    </span>
                    <span class="pt-1 text-sm text-[var(--text-secondary)]">{step}</span>
                  </li>
                ))}
              </ol>
            </div>

            <TechCard variant="elevated">
              <h3 class="text-lg font-semibold text-[var(--text-primary)]">Preuves & résultats</h3>
              <p class="mt-3 text-sm text-[var(--text-secondary)]">
                Pas de chiffres inventés. Nous mesurons ce qui compte :
              </p>
              <ul class="mt-6 space-y-3">
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Plus de demandes qualifiées.</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Un message qui déclenche l'action.</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="mt-0.5 flex-shrink-0" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  <span class="text-sm text-[var(--text-secondary)]">Des pages plus rapides et mieux référencées.</span>
                </li>
              </ul>
            </TechCard>
          </div>
        </div>
      </section>
    </TechBackground>

    <!-- Realizations Section -->
    <section class="section-spacing">
      <div class="container-tech">
        <div class="mb-10 flex flex-wrap items-end justify-between gap-6">
          <h2>Réalisations</h2>
          <CTAButton href="/realisations/" variant="secondary" label="Voir le portfolio">
            Voir le portfolio
          </CTAButton>
        </div>

        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {realisations.slice(0, 3).map((project) => (
            <TechCard hover>
              <span class="inline-block rounded-full bg-[var(--accent-soft)] px-3 py-1 text-xs font-semibold uppercase tracking-wide text-[var(--accent-primary)]">
                {project.label}
              </span>
              <h3 class="mt-4 text-lg font-semibold text-[var(--text-primary)]">{project.title}</h3>
              <p class="mt-3 text-sm text-[var(--text-secondary)]">{project.goal}</p>
              <a
                class="group mt-4 inline-flex items-center gap-2 text-sm font-semibold text-[var(--accent-primary)] transition-all hover:gap-3"
                href={`/realisations/${project.slug}/`}
              >
                <span>Voir le projet</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
              </a>
            </TechCard>
          ))}
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="section-spacing bg-[var(--bg-secondary)]">
      <div class="container-tech">
        <div class="mb-12 space-y-4">
          <h2>L'avis de nos clients</h2>
          <p class="text-lg text-[var(--text-secondary)] max-w-3xl">
            Des résultats concrets et mesurables pour nos clients en Suisse.
          </p>
        </div>

        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {testimonials.map((testimonial) => (
            <TechCard variant="elevated">
              <div class="flex gap-1 text-[var(--accent-primary)]">
                {Array.from({ length: testimonial.rating }).map(() => (
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                  </svg>
                ))}
              </div>
              <p class="mt-4 text-sm text-[var(--text-secondary)] italic">"{testimonial.content}"</p>
              <div class="mt-6 border-t border-[var(--border-color)] pt-4">
                <p class="font-semibold text-[var(--text-primary)]">{testimonial.name}</p>
                <p class="text-xs text-[var(--text-tertiary)]">{testimonial.role} · {testimonial.company}</p>
              </div>
            </TechCard>
          ))}
        </div>
      </div>
    </section>

    <!-- Blog Section -->
    <section class="section-spacing">
      <div class="container-tech">
        <div class="mb-10 flex flex-wrap items-end justify-between gap-6">
          <div>
            <h2>Blog & Conseils</h2>
            <p class="mt-2 text-[var(--text-secondary)]">
              Astuces et conseils pratiques pour améliorer votre présence en ligne.
            </p>
          </div>
          <CTAButton href="/blog/" variant="secondary" label="Tous les articles">
            Tous les articles
          </CTAButton>
        </div>

        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {latestPosts.map((post) => (
            <TechCard hover>
              <span class="inline-block rounded-full bg-[var(--accent-soft)] px-3 py-1 text-xs font-semibold uppercase tracking-wide text-[var(--accent-primary)]">
                {post.data.pubDate}
              </span>
              <h3 class="mt-4 text-lg font-semibold text-[var(--text-primary)]">{post.data.title}</h3>
              <p class="mt-3 text-sm text-[var(--text-secondary)]">{post.data.description}</p>
              <a
                class="group mt-4 inline-flex items-center gap-2 text-sm font-semibold text-[var(--accent-primary)] transition-all hover:gap-3"
                href={`/blog/${post.slug}/`}
              >
                <span>Lire l'article</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
              </a>
            </TechCard>
          ))}
        </div>
      </div>
    </section>

    <!-- FAQ & Contact Section -->
    <section class="section-spacing bg-[var(--bg-secondary)]">
      <div class="container-tech">
        <div class="grid gap-12 lg:grid-cols-[1.1fr,0.9fr] lg:gap-16">
          <div>
            <h2>Questions fréquentes</h2>
            <p class="mt-3 text-[var(--text-secondary)]">
              Vous gardez la maîtrise, nous apportons la structure et la performance.
            </p>
            <div class="mt-8">
              <FaqAccordion items={faqItems} />
            </div>
          </div>

          <TechCard variant="elevated">
            <h3 class="text-lg font-semibold text-[var(--text-primary)]">Contact rapide</h3>
            <p class="mt-3 text-sm text-[var(--text-secondary)]">
              Un projet en tête ? Décrivez votre besoin, nous répondons rapidement avec un
              plan clair.
            </p>
            <form class="mt-6 space-y-4" action={`mailto:${site.email}`} method="POST">
              <div class="space-y-2">
                <label class="text-xs font-semibold text-[var(--text-primary)]" for="quick-name">Nom *</label>
                <input
                  id="quick-name"
                  type="text"
                  name="nom"
                  class="tech-input"
                  required
                />
              </div>
              <div class="space-y-2">
                <label class="text-xs font-semibold text-[var(--text-primary)]" for="quick-email">Email *</label>
                <input
                  id="quick-email"
                  type="email"
                  name="email"
                  class="tech-input"
                  required
                />
              </div>
              <div class="space-y-2">
                <label class="text-xs font-semibold text-[var(--text-primary)]" for="quick-message">Message *</label>
                <textarea
                  id="quick-message"
                  name="message"
                  rows="3"
                  class="tech-input"
                  required
                ></textarea>
              </div>
              <button
                type="submit"
                class="tech-button-primary w-full justify-center"
              >
                Envoyer
              </button>
            </form>
            <div class="mt-4 flex flex-col gap-2 border-t border-[var(--border-color)] pt-4">
              <a class="text-xs text-[var(--accent-primary)] hover:underline" href={`mailto:${site.email}`}>
                {site.email}
              </a>
              <a class="text-xs text-[var(--accent-primary)] hover:underline" href={`tel:${site.phone.replace(/\s+/g, "")}`}>
                {site.phone}
              </a>
            </div>
          </TechCard>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
  /* Tech Border Bottom */
  .tech-border-b {
    border-bottom: 1px solid var(--border-color);
  }
</style>
