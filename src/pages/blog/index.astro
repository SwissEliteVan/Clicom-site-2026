---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const sorted = posts.sort(
  (a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);
---
<BaseLayout
  title="Blog | Clic COM"
  description="Conseils SEO, performance et marketing orientés conversion."
  breadcrumbs={[{ name: "Accueil", item: "/" }, { name: "Blog", item: "/blog/" }]}
>
  <Navbar current="/blog/" />
  <main class="mx-auto max-w-5xl px-6 py-16">
    <h1 class="text-4xl font-semibold text-ink">Blog</h1>
    <p class="mt-4 text-lg text-black/70">
      Articles courts et concrets sur la performance web, le SEO local et la conversion.
    </p>

    <div class="mt-10 grid gap-6">
      {sorted.map((post) => (
        <article class="rounded-3xl border border-black/10 bg-white p-6 shadow-soft">
          <p class="text-xs font-semibold uppercase text-accent">{post.data.pubDate}</p>
          <h2 class="mt-2 text-xl font-semibold text-ink">{post.data.title}</h2>
          <p class="mt-3 text-sm text-black/70">{post.data.description}</p>
          <a class="mt-4 inline-flex text-sm font-semibold text-accent" href={`/blog/${post.slug}/`}>
            Lire l'article →
          </a>
        </article>
      ))}
    </div>
  </main>
  <Footer />
</BaseLayout>
